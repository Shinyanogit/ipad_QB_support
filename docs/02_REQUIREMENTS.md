# Requirements

## 必須（MVP）
- QB演習ページ（`/Answer/...`）で動作する注入UI
- 問題情報の抽出
  - 問題ID
  - 進捗（例: `演習中 60 / 95 問目`）
  - 選択肢数
  - 掲載頁
  - 問題タグ（first/compulsory など）
- SPA遷移やDOM更新に追従
- 設定保存（`storage`）
  - ショートカット有効/無効
  - ナビ（前/次）、解答、選択肢キーの割り当て
  - ノート/検索バーの表示/非表示
  - ChatGPTバーの開閉/位置/APIキー

## ChatGPTバー要件
- 右側トグルで開閉できる
- ドラッグで左右切替
- APIキーはユーザーが設定（保存済み表示）
- 問題文＋選択肢を自動で取り込み、質問に回答
- 返答は日本語の簡潔な学習支援

## キーボード操作（PC向け）
- `ArrowRight`/`ArrowLeft` で次/前の問題へ移動
- `a`〜`e` で選択肢(0-4)をトグル
- `s` で「回答を送信」→「解答を確認する」を連続実行
- 入力欄/textarea/contenteditable にフォーカスがある時、またはIME変換中は無効

## iPad向けUI要件
- キーボード依存を避け、タップ操作のUIを用意
- iframe/SPAでDOMが変わっても再注入される

## 重要方針
- 参照HTMLのDOM構造に基づく安定セレクタとフォールバックを併用
- 中核ロジックは純粋TSとして切り出す
- UI/拡張API依存は最小化する

## 非目標（現時点）
- 問題文/解説の全文保存
- 外部API連携の自動同期
- 学習履歴の永続ログ
